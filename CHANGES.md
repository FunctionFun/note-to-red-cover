# 变更记录

## 2025-12-22

### 功能改进
1. **右侧插件面板默认宽度设置**：将右侧插件面板的默认宽度设置为340px
2. **图片预览缩放调整**：将`.red-image-preview`元素的默认`transform`缩放值设置为0.7

### 问题修复
1. **静态方法调用错误**：修复了`processImages`方法的调用方式，从`this.processImages`改为`RedConverter.processImages`
2. **图片路径提取增强**：改进了图片路径提取逻辑，支持从多个位置获取图片信息：
   - `src`属性
   - `data-href`属性
   - `data-link`属性
   - `data-src`属性
   - `data-embed-src`属性
   - 子元素的`img`标签
   - `background-image`样式
3. **Obsidian内部链接处理**：增强了对Obsidian内部图片链接格式（`![[图片名称.png]]`）的处理
4. **路径清理逻辑**：添加了路径清理功能，处理相对路径和缺少扩展名的情况
5. **TypeScript类型错误**：修复了类型转换错误，确保代码能够正常编译
6. **图片加载Promise处理**：改进了图片加载的异步处理逻辑，确保所有图片都能被正确跟踪

### 代码优化
1. **错误处理增强**：添加了更详细的错误日志和错误提示
2. **样式改进**：优化了图片显示样式，确保图片能够正确适应容器
3. **性能优化**：改进了异步处理逻辑，提高了图片加载效率
